## Assembly

Low level programming language for a computer
one-to-one correspondence
Specific to given processor
- Mnemonics to represent the names of low-level machine instructions
- Labels o represent the names of variables or memory addresses
- directives to define data and constraints
- Macros to facilitate the inline expansion of text into other code

**Commonly used directive**
- .ascii "string" - string of ASCII characters is loaded into consecutive byte addresses in memory. 
- .asciz "string" - same as .ascii, except that each string is terminated by zero
- .data - identifies data that should be placed in data
- .end - end of source code file
- .equ *symbol, expression* - defining a variable / constant - done at compile time - cannot change
- .global *symbol* - makes symbol visible outside assembled object file
- .include "filename" - just including header files, .include's are copy-pastes
- .space *size*
- .text - identifies where code starts
- .word *expression* - similar to .byte expression

```assembly
#Each one of these values are going to stored as a binary signed representation 32-bit number
.word 4, 7, -5, 6
```

##### Labels
Represents the memory address of the data or instruction marked with that label
**A pointer to that location in memory**

```assembly
loop: #read from r2 and store to r3
	ldbio r4, 0(r2) #0 is an offset of r2 - 0 bytes away from r2
	stbio r4, 0(r3)
	br loop
```
When this code is assembled, the memory address of the ldbio instruction will be inserted in the br instruction

##### Registers
Stick to registers r2-r23

r0 is 0x00000000 - used for resets and comparing
You need bit masking to isolate the bit you care about - take your input and it with 0's except the bit you care about 
   0101
&0010
   00X0

Active high/low doesn't matter, only how you interpret the X.
**ALWAYS MASK HIGH FOR THE BIT YOU CARE ABOUT /// ALWAYS POSITIVE**

#### Instructions
**R-Type** - register type instruction
- Data must already exist in registers to perform task
```assembly
add rC, rA, rB             rC <= rA + rB
sub r2, r16, r15
mul, r3, r5, r6
instruction destReg, regA, regB
```

**I-Type** - Immediate instruction (CONSTANTS used)
Does not actually happen before other instructions. Just means values are immediately available 
Immediate operand is a 16 bit number
```assembly
addi rB, rA, IMMED16 #Constant of 16 bits
subi r2, r16, -4
muli r3, r4, 100
```
Value is not retrieved from a register
Use immediate instructions for bit masks. "Check for button presses"

**J-Type** - Jump instruction
Call to subroutine, or to a particular address, or label

```assembly
#r13 is data
#0101 stored in r3
#solution stored in r4
#branch if eq (beq)

loop:   ldbio r13, 0(r3) #go to r3, grab data, store in r13
		andi r4, r13, 2 #store in r4, and r13 with constant 2
		beq r4, r0, loop #branch if r4 and r0 (0x00000000)
		br Loop1

loop1: stuff...
```

#### Memory Access
Read : ldw r3, 0(r5)

Write: stw r3, 4(r5)
